<html>
    <head>
        <link rel="stylesheet" href="style.css">
        <title>
            Dice Counter
        </title>
        <script>
            var selectedWhiteDice
            var selectedRedDice
            var selectedSpecialDice
            var resultArrayCont = [];
            var resultArray = [
                [2,0],
                [3,0],
                [4,0],
                [5,0],
                [6,0],
                [7,0],
                [8,0],
                [9,0],
                [10,0],
                [11,0],
                [12,0]
            ];
            var specResultArrayCont = [];
            var specResultArray = [
                ['Yellow',0],
                ['Blue',0],
                ['Green',0],
                ['Barbarian',0]
            ];

            var myFunction = function() {
                if(this.classList.contains('white')){
                    if(selectedWhiteDice){
                        selectedWhiteDice.classList.toggle("active");
                    }
                    this.classList.toggle("active");
                    selectedWhiteDice=this
                }

                if(this.classList.contains('red')){
                    if(selectedRedDice){
                        selectedRedDice.classList.toggle("active");
                    }
                    this.classList.toggle("active");
                    selectedRedDice=this
                }

                if(this.classList.contains('special')){
                    console.log(this)
                    console.log(selectedSpecialDice)
                    if(selectedSpecialDice && selectedSpecialDice!=this){
                        selectedSpecialDice.classList.toggle("active");
                        this.classList.toggle("active");
                    } else if (this == selectedSpecialDice){
                        this.classList.toggle("active");
                    } else {
                        this.classList.toggle("active");
                    }
                    selectedSpecialDice=this
                    if(!this.classList.contains("active")){
                        selectedSpecialDice=""
                    }
                }
            };
            document.addEventListener('DOMContentLoaded', function () {
                var elements = document.getElementsByClassName("dice");

                for (var i = 0; i < elements.length; i++) {
                    elements[i].addEventListener('click', myFunction, false);
                }

                var submitButtonElement = document.getElementById("submitButton")
                submitButtonElement.addEventListener('click',function(){
                    // This is the submission event
                    if(!selectedRedDice || !selectedWhiteDice){
                        alert('number dices always have to be selected')
                        return false;
                    }
                    let result = parseInt(selectedRedDice.dataset.number)+parseInt(selectedWhiteDice.dataset.number);
                    resultArrayCont.push(parseInt(result));
                    if(selectedSpecialDice){
                        specResultArrayCont.push(selectedSpecialDice.dataset.option)
                        switch(selectedSpecialDice.dataset.option){
                            case 'yellow':
                                specResultArray[0][1]++
                                document.getElementById("yellowRes").innerText = specResultArray[0][1]
                                break;
                            case 'blue':
                                specResultArray[1][1]++
                                document.getElementById("blueRes").innerText = specResultArray[1][1]
                                break;
                            case 'green':
                                specResultArray[2][1]++
                                document.getElementById("greenRes").innerText = specResultArray[2][1]
                                break;
                            case 'barbarian':
                                specResultArray[3][1]++
                                document.getElementById("barbarianRes").innerText = specResultArray[3][1]
                                break;
                        }
                        if(document.getElementById("yellowRes").innerText!=0){
                            document.getElementById("turnsSinceLastYellow").innerText = specResultArrayCont.length - specResultArrayCont.lastIndexOf('yellow') - 1
                        }
                        if(document.getElementById("blueRes").innerText!=0){
                            document.getElementById("turnsSinceLastBlue").innerText = specResultArrayCont.length - specResultArrayCont.lastIndexOf('blue') - 1
                        }
                        if(document.getElementById("greenRes").innerText!=0){
                            document.getElementById("turnsSinceLastGreen").innerText = specResultArrayCont.length - specResultArrayCont.lastIndexOf('green') - 1
                        }
                        if(document.getElementById("barbarianRes").innerText!=0){
                            document.getElementById("turnsSinceLastBarbarian").innerText = specResultArrayCont.length - specResultArrayCont.lastIndexOf('barbarian') - 1
                        }
                    }
                    function lastTurn(){
                        if(document.getElementById("twoRes").innerText!=0){
                            document.getElementById("turnsSinceLastTwo").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(2) - 1
                        }
                        if(document.getElementById("threeRes").innerText!=0){
                            document.getElementById("turnsSinceLastThree").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(3) - 1
                        }
                        if(document.getElementById("fourRes").innerText!=0){
                            document.getElementById("turnsSinceLastFour").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(4) - 1
                        }
                        if(document.getElementById("fiveRes").innerText!=0){
                            document.getElementById("turnsSinceLastFive").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(5) - 1
                        }
                        if(document.getElementById("sixRes").innerText!=0){
                            document.getElementById("turnsSinceLastSix").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(6) - 1
                        }
                        if(document.getElementById("sevenRes").innerText!=0){
                            document.getElementById("turnsSinceLastSeven").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(7) - 1
                        }
                        if(document.getElementById("eightRes").innerText!=0){
                            document.getElementById("turnsSinceLastEight").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(8) - 1
                        }
                        if(document.getElementById("nineRes").innerText!=0){
                            document.getElementById("turnsSinceLastNine").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(9) - 1
                        }
                        if(document.getElementById("tenRes").innerText!=0){
                            document.getElementById("turnsSinceLastTen").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(10) - 1
                        }
                        if(document.getElementById("elevenRes").innerText!=0){
                            document.getElementById("turnsSinceLastEleven").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(11) - 1
                        }
                        if(document.getElementById("twelveRes").innerText!=0){
                            document.getElementById("turnsSinceLastTwelve").innerText = resultArrayCont.length - resultArrayCont.lastIndexOf(12) - 1
                        }                       
                    }

                    switch(result){
                        case 2: 
                            resultArray[0][1]++
                            document.getElementById("twoRes").innerText = resultArray[0][1]
                            break;
                        case 3: 
                            resultArray[1][1]++
                            document.getElementById("threeRes").innerText = resultArray[1][1]
                            break;
                        case 4: 
                            resultArray[2][1]++
                            document.getElementById("fourRes").innerText = resultArray[2][1]
                            break;
                        case 5: 
                            resultArray[3][1]++                        
                            document.getElementById("fiveRes").innerText = resultArray[3][1]
                            break;     
                        case 6: 
                            resultArray[4][1]++
                            document.getElementById("sixRes").innerText = resultArray[4][1]
                            break;
                        case 7: 
                            resultArray[5][1]++
                            document.getElementById("sevenRes").innerText = resultArray[5][1]
                            break;
                        case 8: 
                            resultArray[6][1]++
                            document.getElementById("eightRes").innerText = resultArray[6][1]
                            break;
                        case 9: 
                            resultArray[7][1]++
                            document.getElementById("nineRes").innerText = resultArray[7][1]
                            break;   
                        case 10: 
                            resultArray[8][1]++
                            document.getElementById("tenRes").innerText = resultArray[8][1]
                            break;
                        case 11: 
                            resultArray[9][1]++
                            document.getElementById("elevenRes").innerText = resultArray[9][1]
                            break;
                        case 12: 
                            resultArray[10][1]++
                            document.getElementById("twelveRes").innerText = resultArray[10][1]
                            break;                                     
                    }
                    lastTurn()
                });
            }, false);


        </script>
    </head>
    <body>
        <div class="dices">
            <div class="whiteDice">
                <div data-number="1" class="white dice diceOne"></div>
                <div data-number="2" class="white dice diceTwo"></div>
                <div data-number="3" class="white dice diceThree"></div>
                <div data-number="4" class="white dice diceFour"></div>
                <div data-number="5" class="white dice diceFive"></div>
                <div data-number="6" class="white dice diceSix"></div>
            </div>
            <div class="redDice">
                <div data-number="1" class="red dice diceOne"></div>
                <div data-number="2" class="red dice diceTwo"></div>
                <div data-number="3" class="red dice diceThree"></div>
                <div data-number="4" class="red dice diceFour"></div>
                <div data-number="5" class="red dice diceFive"></div>
                <div data-number="6" class="red dice diceSix"></div>
            </div>
            <div class="specialDice">
                <div data-option="yellow" class="special dice diceThree" style="background-image: url('yellowCastle.png'); background-size: contain"></div>
                <div data-option="blue" class="special dice diceOne" style="background-image: url('blueCastle.png'); background-size: contain"></div>
                <div data-option="green" class="special dice diceTwo" style="background-image: url('greenCastle.png'); background-size: contain"></div>
                <div data-option="barbarian" class="special dice diceFour"style="background-image: url('barbarian.png'); background-size: contain"></div>
            </div>
        </div>
        <div style="display:flex; justify-content: center; height:3%; padding-bottom:25px;">
            <div id="submitButton">Submit</div>
        </div>
        <hr>
        <div style="color:white; display: flex; justify-content: center;flex-direction: column; align-items: center;">
            <p style="font-size: 60px;">Numbers:</p>
            <table id="resultTable" style="color:white; font-size: 30px;">
                <thead>
                    <th style="padding-right: 20px;">Number rolled</th>
                    <th style="padding-right: 20px;">Amount</th>
                    <th style="padding-right: 20px;">Turns since last rolled</th>
                </thead>
                <tr>
                    <td>2</td>
                    <td id="twoRes">0</td>
                    <td id="turnsSinceLastTwo">-</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td id="threeRes">0</td>
                    <td id="turnsSinceLastThree">-</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td id="fourRes">0</td>
                    <td id="turnsSinceLastFour">-</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td id="fiveRes">0</td>
                    <td id="turnsSinceLastFive">-</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td id="sixRes">0</td>
                    <td id="turnsSinceLastSix">-</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td id="sevenRes">0</td>
                    <td id="turnsSinceLastSeven">-</td>
                </tr>
                <tr>
                    <td>8</td>
                    <td id="eightRes">0</td>
                    <td id="turnsSinceLastEight">-</td>
                </tr>
                <tr>
                    <td>9</td>
                    <td id="nineRes">0</td>
                    <td id="turnsSinceLastNine">-</td>
                </tr>
                <tr>
                    <td>10</td>
                    <td id="tenRes">0</td>
                    <td id="turnsSinceLastTen">-</td>
                </tr>
                <tr>
                    <td>11</td>
                    <td id="elevenRes">0</td>
                    <td id="turnsSinceLastEleven">-</td>
                </tr>
                <tr>
                    <td>12</td>
                    <td id="twelveRes">0</td>
                    <td id="turnsSinceLastTwelve">-</td>
                </tr>
            </table>
            <p style="font-size: 60px;">Cities & Knights:</p>
            <table id="resultTable" style="color:white; font-size: 30px;">
                <thead>
                    <th>Special rolled</th>
                    <th>Amount</th>
                    <th>Turns since last rolled</th>
                </thead>
                <tr>
                    <td>Yellow</td>
                    <td id="yellowRes">0</td>
                    <td id="turnsSinceLastYellow">-</td>
                </tr>
                <tr>
                    <td>Blue</td>
                    <td id="blueRes">0</td>
                    <td id="turnsSinceLastBlue">-</td>
                </tr>
                <tr>
                    <td>Green</td>
                    <td id="greenRes">0</td>
                    <td id="turnsSinceLastGreen">-</td>
                </tr>
                <tr>
                    <td>Barbarian</td>
                    <td id="barbarianRes">0</td>
                    <td id="turnsSinceLastBarbarian">-</td>
                </tr>
            </table>
        </div>
    </body>
</html>